
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Reference &#8212; capnp 1.0.0b2 documentation</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Quickstart" href="quickstart.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="quickstart.html" title="Quickstart"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">capnp 1.0.0b2 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">API Reference</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-capnp">
<span id="api-reference"></span><span id="api"></span><h1>API Reference<a class="headerlink" href="#module-capnp" title="Permalink to this headline">¶</a></h1>
<p>A python library wrapping the Cap’n Proto C++ library</p>
<p>Example Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">capnp</span>

<span class="n">addressbook</span> <span class="o">=</span> <span class="n">capnp</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;addressbook.capnp&#39;</span><span class="p">)</span>

<span class="c1"># Building</span>
<span class="n">addresses</span> <span class="o">=</span> <span class="n">addressbook</span><span class="o">.</span><span class="n">AddressBook</span><span class="o">.</span><span class="n">newMessage</span><span class="p">()</span>
<span class="n">people</span> <span class="o">=</span> <span class="n">addresses</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="s1">&#39;people&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="n">alice</span> <span class="o">=</span> <span class="n">people</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">alice</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="mi">123</span>
<span class="n">alice</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Alice&#39;</span>
<span class="n">alice</span><span class="o">.</span><span class="n">email</span> <span class="o">=</span> <span class="s1">&#39;alice@example.com&#39;</span>
<span class="n">alicePhone</span> <span class="o">=</span> <span class="n">alice</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="s1">&#39;phones&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">alicePhone</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s1">&#39;mobile&#39;</span>

<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;example.bin&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="n">addresses</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="c1"># Reading</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;example.bin&#39;</span><span class="p">)</span>

<span class="n">addresses</span> <span class="o">=</span> <span class="n">addressbook</span><span class="o">.</span><span class="n">AddressBook</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="k">for</span> <span class="n">person</span> <span class="ow">in</span> <span class="n">addresses</span><span class="o">.</span><span class="n">people</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">person</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="n">person</span><span class="o">.</span><span class="n">email</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">phone</span> <span class="ow">in</span> <span class="n">person</span><span class="o">.</span><span class="n">phones</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">phone</span><span class="o">.</span><span class="n">type</span><span class="p">,</span> <span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="n">phone</span><span class="o">.</span><span class="n">number</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="classes">
<h2>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="rpc">
<h3>RPC<a class="headerlink" href="#rpc" title="Permalink to this headline">¶</a></h3>
<div class="section" id="promise">
<h4>Promise<a class="headerlink" href="#promise" title="Permalink to this headline">¶</a></h4>
<dl class="py attribute">
<dt id="capnp.Promise">
<code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">Promise</code><a class="headerlink" href="#capnp.Promise" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="#capnp.lib.capnp._Promise" title="capnp.lib.capnp._Promise"><code class="xref py py-class docutils literal notranslate"><span class="pre">capnp.lib.capnp._Promise</span></code></a></p>
</dd></dl>

<p>Promise may be one of:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#capnp.lib.capnp._Promise" title="capnp.lib.capnp._Promise"><code class="xref py py-meth docutils literal notranslate"><span class="pre">capnp.lib.capnp._Promise()</span></code></a></p></li>
<li><p><a class="reference internal" href="#capnp.lib.capnp._RemotePromise" title="capnp.lib.capnp._RemotePromise"><code class="xref py py-meth docutils literal notranslate"><span class="pre">capnp.lib.capnp._RemotePromise()</span></code></a></p></li>
<li><p><a class="reference internal" href="#capnp.lib.capnp._VoidPromise" title="capnp.lib.capnp._VoidPromise"><code class="xref py py-meth docutils literal notranslate"><span class="pre">capnp.lib.capnp._VoidPromise()</span></code></a></p></li>
<li><p><a class="reference internal" href="#capnp.PromiseFulfillerPair" title="capnp.PromiseFulfillerPair"><code class="xref py py-meth docutils literal notranslate"><span class="pre">PromiseFulfillerPair()</span></code></a></p></li>
</ul>
<dl class="py class">
<dt id="capnp.lib.capnp._Promise">
<em class="property">class </em><code class="sig-prename descclassname">capnp.lib.capnp.</code><code class="sig-name descname">_Promise</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">obj</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._Promise" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="capnp.lib.capnp._Promise.attach">
<code class="sig-name descname">attach</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._Promise.attach" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="capnp.lib.capnp._Promise.cancel">
<code class="sig-name descname">cancel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">numParents</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._Promise.cancel" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="capnp.lib.capnp._Promise.is_consumed">
<code class="sig-name descname">is_consumed</code><a class="headerlink" href="#capnp.lib.capnp._Promise.is_consumed" title="Permalink to this definition">¶</a></dt>
<dd><p>is_consumed: ‘bool’</p>
</dd></dl>

<dl class="py method">
<dt id="capnp.lib.capnp._Promise.then">
<code class="sig-name descname">then</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">func</span></em>, <em class="sig-param"><span class="n">error_func</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._Promise.then" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="capnp.lib.capnp._Promise.wait">
<code class="sig-name descname">wait</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._Promise.wait" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="capnp.lib.capnp._RemotePromise">
<em class="property">class </em><code class="sig-prename descclassname">capnp.lib.capnp.</code><code class="sig-name descname">_RemotePromise</code><a class="headerlink" href="#capnp.lib.capnp._RemotePromise" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="capnp.lib.capnp._RemotePromise.a_wait">
<code class="sig-name descname">a_wait</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._RemotePromise.a_wait" title="Permalink to this definition">¶</a></dt>
<dd><p>Asyncio version of wait().
Required when using asyncio for socket communication.</p>
<p>Will still work with non-asyncio socket communication, but requires async handling of the function call.</p>
</dd></dl>

<dl class="py method">
<dt id="capnp.lib.capnp._RemotePromise.as_pypromise">
<code class="sig-name descname">as_pypromise</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._RemotePromise.as_pypromise" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="capnp.lib.capnp._RemotePromise.cancel">
<code class="sig-name descname">cancel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">numParents</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._RemotePromise.cancel" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="capnp.lib.capnp._RemotePromise.is_consumed">
<code class="sig-name descname">is_consumed</code><a class="headerlink" href="#capnp.lib.capnp._RemotePromise.is_consumed" title="Permalink to this definition">¶</a></dt>
<dd><p>is_consumed: ‘bool’</p>
</dd></dl>

<dl class="py attribute">
<dt id="capnp.lib.capnp._RemotePromise.schema">
<code class="sig-name descname">schema</code><a class="headerlink" href="#capnp.lib.capnp._RemotePromise.schema" title="Permalink to this definition">¶</a></dt>
<dd><p>A property that returns the _StructSchema object matching this reader</p>
</dd></dl>

<dl class="py method">
<dt id="capnp.lib.capnp._RemotePromise.then">
<code class="sig-name descname">then</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">func</span></em>, <em class="sig-param"><span class="n">error_func</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._RemotePromise.then" title="Permalink to this definition">¶</a></dt>
<dd><p>Promise pipelining, use to queue up operations on a promise before executing the promise.</p>
</dd></dl>

<dl class="py method">
<dt id="capnp.lib.capnp._RemotePromise.to_dict">
<code class="sig-name descname">to_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">ordered</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._RemotePromise.to_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="capnp.lib.capnp._RemotePromise.wait">
<code class="sig-name descname">wait</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._RemotePromise.wait" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait on the promise. This will block until the promise has completed.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="capnp.lib.capnp._VoidPromise">
<em class="property">class </em><code class="sig-prename descclassname">capnp.lib.capnp.</code><code class="sig-name descname">_VoidPromise</code><a class="headerlink" href="#capnp.lib.capnp._VoidPromise" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="capnp.lib.capnp._VoidPromise.as_pypromise">
<code class="sig-name descname">as_pypromise</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._VoidPromise.as_pypromise" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="capnp.lib.capnp._VoidPromise.attach">
<code class="sig-name descname">attach</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">args</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._VoidPromise.attach" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="capnp.lib.capnp._VoidPromise.cancel">
<code class="sig-name descname">cancel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">numParents</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._VoidPromise.cancel" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="capnp.lib.capnp._VoidPromise.is_consumed">
<code class="sig-name descname">is_consumed</code><a class="headerlink" href="#capnp.lib.capnp._VoidPromise.is_consumed" title="Permalink to this definition">¶</a></dt>
<dd><p>is_consumed: ‘bool’</p>
</dd></dl>

<dl class="py method">
<dt id="capnp.lib.capnp._VoidPromise.then">
<code class="sig-name descname">then</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">func</span></em>, <em class="sig-param"><span class="n">error_func</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._VoidPromise.then" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="capnp.lib.capnp._VoidPromise.wait">
<code class="sig-name descname">wait</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._VoidPromise.wait" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="capnp.PromiseFulfillerPair">
<em class="property">class </em><code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">PromiseFulfillerPair</code><a class="headerlink" href="#capnp.PromiseFulfillerPair" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="capnp.PromiseFulfillerPair.fulfill">
<code class="sig-name descname">fulfill</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.PromiseFulfillerPair.fulfill" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="capnp.PromiseFulfillerPair.is_consumed">
<code class="sig-name descname">is_consumed</code><a class="headerlink" href="#capnp.PromiseFulfillerPair.is_consumed" title="Permalink to this definition">¶</a></dt>
<dd><p>is_consumed: ‘bool’</p>
</dd></dl>

<dl class="py attribute">
<dt id="capnp.PromiseFulfillerPair.promise">
<code class="sig-name descname">promise</code><a class="headerlink" href="#capnp.PromiseFulfillerPair.promise" title="Permalink to this definition">¶</a></dt>
<dd><p>promise: capnp.lib.capnp._VoidPromise</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="communication">
<h4>Communication<a class="headerlink" href="#communication" title="Permalink to this headline">¶</a></h4>
<dl class="py class">
<dt id="capnp.TwoPartyClient">
<em class="property">class </em><code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">TwoPartyClient</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">socket</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">traversal_limit_in_words</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">nesting_limit</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.TwoPartyClient" title="Permalink to this definition">¶</a></dt>
<dd><p>TwoPartyClient for RPC Communication</p>
<p>Can be initialized using a socket wrapper (libcapnp) or using asyncio controlled sockets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>socket</strong> – Can be a string defining a socket (e.g. localhost:12345) or a file descriptor for a socket.
Passes socket directly to libcapnp. Do not use with asyncio.</p></li>
<li><p><strong>traversal_limit_in_words</strong> – Pointer derefence limit (see <a class="reference external" href="https://capnproto.org/cxx.html">https://capnproto.org/cxx.html</a>).</p></li>
<li><p><strong>nesting_limit</strong> – Recursive limit when reading types (see <a class="reference external" href="https://capnproto.org/cxx.html">https://capnproto.org/cxx.html</a>).</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="capnp.TwoPartyClient.bootstrap">
<code class="sig-name descname">bootstrap</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.TwoPartyClient.bootstrap" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="capnp.TwoPartyClient.on_disconnect">
<code class="sig-name descname">on_disconnect</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.TwoPartyClient.on_disconnect" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="capnp.TwoPartyClient.read">
<code class="sig-name descname">read</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">bufsize</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.TwoPartyClient.read" title="Permalink to this definition">¶</a></dt>
<dd><p>libcapnp reader (asyncio sockets only)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>bufsize</strong> – Buffer size to read from the libcapnp library</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="capnp.TwoPartyClient.write">
<code class="sig-name descname">write</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.TwoPartyClient.write" title="Permalink to this definition">¶</a></dt>
<dd><p>libcapnp writer (asyncio sockets only)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – Buffer to write to the libcapnp library</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="capnp.TwoPartyServer">
<em class="property">class </em><code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">TwoPartyServer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">socket</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">bootstrap</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">traversal_limit_in_words</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">nesting_limit</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.TwoPartyServer" title="Permalink to this definition">¶</a></dt>
<dd><p>TwoPartyServer for RPC Communication</p>
<p>Can be initialized using a socket wrapper (libcapnp) or using asyncio controlled sockets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>socket</strong> – Can be a string defining a socket (e.g. localhost:12345, also supports *:12345)
or a file descriptor for a socket.
Passes socket directly to libcapnp. Do not use with asyncio.</p></li>
<li><p><strong>bootstrap</strong> – Class object defining the implementation of the Cap’n’proto interface.</p></li>
<li><p><strong>traversal_limit_in_words</strong> – Pointer derefence limit (see <a class="reference external" href="https://capnproto.org/cxx.html">https://capnproto.org/cxx.html</a>).</p></li>
<li><p><strong>nesting_limit</strong> – Recursive limit when reading types (see <a class="reference external" href="https://capnproto.org/cxx.html">https://capnproto.org/cxx.html</a>).</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="capnp.TwoPartyServer.bootstrap">
<code class="sig-name descname">bootstrap</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.TwoPartyServer.bootstrap" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="capnp.TwoPartyServer.on_disconnect">
<code class="sig-name descname">on_disconnect</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.TwoPartyServer.on_disconnect" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="capnp.TwoPartyServer.poll_forever">
<code class="sig-name descname">poll_forever</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.TwoPartyServer.poll_forever" title="Permalink to this definition">¶</a></dt>
<dd><p>Poll libcapnp library forever (asyncio)</p>
</dd></dl>

<dl class="py method">
<dt id="capnp.TwoPartyServer.poll_once">
<code class="sig-name descname">poll_once</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.TwoPartyServer.poll_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Poll libcapnp library one cycle.</p>
</dd></dl>

<dl class="py attribute">
<dt id="capnp.TwoPartyServer.port">
<code class="sig-name descname">port</code><a class="headerlink" href="#capnp.TwoPartyServer.port" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="capnp.TwoPartyServer.port_promise">
<code class="sig-name descname">port_promise</code><a class="headerlink" href="#capnp.TwoPartyServer.port_promise" title="Permalink to this definition">¶</a></dt>
<dd><p>port_promise: object</p>
</dd></dl>

<dl class="py method">
<dt id="capnp.TwoPartyServer.read">
<code class="sig-name descname">read</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">bufsize</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.TwoPartyServer.read" title="Permalink to this definition">¶</a></dt>
<dd><p>libcapnp reader (asyncio sockets only)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>bufsize</strong> – Buffer size to read from the libcapnp library</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="capnp.TwoPartyServer.run_forever">
<code class="sig-name descname">run_forever</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.TwoPartyServer.run_forever" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="capnp.TwoPartyServer.write">
<code class="sig-name descname">write</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.TwoPartyServer.write" title="Permalink to this definition">¶</a></dt>
<dd><p>libcapnp writer (asyncio sockets only)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> – Buffer to write to the libcapnp library</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="capability">
<h4>Capability<a class="headerlink" href="#capability" title="Permalink to this headline">¶</a></h4>
<dl class="py class">
<dt id="capnp.lib.capnp._DynamicCapabilityClient">
<em class="property">class </em><code class="sig-prename descclassname">capnp.lib.capnp.</code><code class="sig-name descname">_DynamicCapabilityClient</code><a class="headerlink" href="#capnp.lib.capnp._DynamicCapabilityClient" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="capnp.lib.capnp._DynamicCapabilityClient.cast_as">
<code class="sig-name descname">cast_as</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">schema</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._DynamicCapabilityClient.cast_as" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="capnp.lib.capnp._DynamicCapabilityClient.schema">
<code class="sig-name descname">schema</code><a class="headerlink" href="#capnp.lib.capnp._DynamicCapabilityClient.schema" title="Permalink to this definition">¶</a></dt>
<dd><p>A property that returns the _InterfaceSchema object matching this client</p>
</dd></dl>

<dl class="py method">
<dt id="capnp.lib.capnp._DynamicCapabilityClient.upcast">
<code class="sig-name descname">upcast</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">schema</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._DynamicCapabilityClient.upcast" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="response">
<h4>Response<a class="headerlink" href="#response" title="Permalink to this headline">¶</a></h4>
<dl class="py class">
<dt id="capnp.lib.capnp._Response">
<em class="property">class </em><code class="sig-prename descclassname">capnp.lib.capnp.</code><code class="sig-name descname">_Response</code><a class="headerlink" href="#capnp.lib.capnp._Response" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="capnp.lib.capnp._Response.as_builder">
<code class="sig-name descname">as_builder</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">num_first_segment_words</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._Response.as_builder" title="Permalink to this definition">¶</a></dt>
<dd><p>A method for casting this Reader to a Builder</p>
<p>This is a copying operation with respect to the message’s buffer. Changes in the new builder will not reflect in the original reader.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>num_first_segment_words</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Size of the first segment to allocate in the message (in words ie. 8 byte increments)</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructBuilder</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="capnp.lib.capnp._Response.is_root">
<code class="sig-name descname">is_root</code><a class="headerlink" href="#capnp.lib.capnp._Response.is_root" title="Permalink to this definition">¶</a></dt>
<dd><p>is_root: ‘bool’</p>
</dd></dl>

<dl class="py attribute">
<dt id="capnp.lib.capnp._Response.schema">
<code class="sig-name descname">schema</code><a class="headerlink" href="#capnp.lib.capnp._Response.schema" title="Permalink to this definition">¶</a></dt>
<dd><p>A property that returns the _StructSchema object matching this reader</p>
</dd></dl>

<dl class="py method">
<dt id="capnp.lib.capnp._Response.to_dict">
<code class="sig-name descname">to_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">ordered</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.lib.capnp._Response.to_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="capnp.lib.capnp._Response.total_size">
<code class="sig-name descname">total_size</code><a class="headerlink" href="#capnp.lib.capnp._Response.total_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="capnp.lib.capnp._Response.which">
<code class="sig-name descname">which</code><a class="headerlink" href="#capnp.lib.capnp._Response.which" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the enum corresponding to the union in this struct</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicEnumField</span></code></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A string/enum corresponding to what field is set in the union</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><code class="xref py py-exc docutils literal notranslate"><span class="pre">KjException</span></code> if this struct doesn’t contain a union</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="miscellaneous">
<h3>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="capnp.KjException">
<em class="property">class </em><code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">KjException</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">message</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">nature</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">durability</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">wrapper</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">type</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.KjException" title="Permalink to this definition">¶</a></dt>
<dd><p>KjException is a wrapper of the internal C++ exception type. There is an enum named <cite>Type</cite> listed below, and a bunch of fields</p>
<dl class="py class">
<dt id="capnp.KjException.Type">
<em class="property">class </em><code class="sig-name descname">Type</code><a class="headerlink" href="#capnp.KjException.Type" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt id="capnp.KjException.Type.DISCONNECTED">
<code class="sig-name descname">DISCONNECTED</code><em class="property"> = 'DISCONNECTED'</em><a class="headerlink" href="#capnp.KjException.Type.DISCONNECTED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="capnp.KjException.Type.FAILED">
<code class="sig-name descname">FAILED</code><em class="property"> = 'FAILED'</em><a class="headerlink" href="#capnp.KjException.Type.FAILED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="capnp.KjException.Type.OTHER">
<code class="sig-name descname">OTHER</code><em class="property"> = 'OTHER'</em><a class="headerlink" href="#capnp.KjException.Type.OTHER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="capnp.KjException.Type.OVERLOADED">
<code class="sig-name descname">OVERLOADED</code><em class="property"> = 'OVERLOADED'</em><a class="headerlink" href="#capnp.KjException.Type.OVERLOADED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="capnp.KjException.Type.UNIMPLEMENTED">
<code class="sig-name descname">UNIMPLEMENTED</code><em class="property"> = 'UNIMPLEMENTED'</em><a class="headerlink" href="#capnp.KjException.Type.UNIMPLEMENTED" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="capnp.KjException.Type.reverse_mapping">
<code class="sig-name descname">reverse_mapping</code><em class="property"> = {'DISCONNECTED': 'DISCONNECTED', 'FAILED': 'FAILED', 'OTHER': 'OTHER', 'OVERLOADED': 'OVERLOADED', 'UNIMPLEMENTED': 'UNIMPLEMENTED'}</em><a class="headerlink" href="#capnp.KjException.Type.reverse_mapping" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py attribute">
<dt id="capnp.KjException.args">
<code class="sig-name descname">args</code><a class="headerlink" href="#capnp.KjException.args" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="capnp.KjException.description">
<em class="property">property </em><code class="sig-name descname">description</code><a class="headerlink" href="#capnp.KjException.description" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="capnp.KjException.file">
<em class="property">property </em><code class="sig-name descname">file</code><a class="headerlink" href="#capnp.KjException.file" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="capnp.KjException.line">
<em class="property">property </em><code class="sig-name descname">line</code><a class="headerlink" href="#capnp.KjException.line" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="capnp.KjException.type">
<em class="property">property </em><code class="sig-name descname">type</code><a class="headerlink" href="#capnp.KjException.type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="capnp.KjException.with_traceback">
<code class="sig-name descname">with_traceback</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#capnp.KjException.with_traceback" title="Permalink to this definition">¶</a></dt>
<dd><p>Exception.with_traceback(tb) –
set self.__traceback__ to tb and return self.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="capnp.SchemaParser">
<em class="property">class </em><code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">SchemaParser</code><a class="headerlink" href="#capnp.SchemaParser" title="Permalink to this definition">¶</a></dt>
<dd><p>A class for loading Cap’n Proto schema files.</p>
<p>Do not use this class unless you’re sure you know what you’re doing. Use the convenience method <a class="reference internal" href="#capnp.load" title="capnp.load"><code class="xref py py-func docutils literal notranslate"><span class="pre">load()</span></code></a> instead.</p>
<dl class="py method">
<dt id="capnp.SchemaParser.load">
<code class="sig-name descname">load</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">file_name</span></em>, <em class="sig-param"><span class="n">display_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">imports</span><span class="o">=</span><span class="default_value">[]</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.SchemaParser.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a Cap’n Proto schema from a file</p>
<p>You will have to load a schema before you can begin doing anything
meaningful with this library. Loading a schema is much like loading
a Python module (and load even returns a <cite>ModuleType</cite>). Once it’s been
loaded, you use it much like any other Module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">parser</span> <span class="o">=</span> <span class="n">capnp</span><span class="o">.</span><span class="n">SchemaParser</span><span class="p">()</span>
<span class="n">addressbook</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;addressbook.capnp&#39;</span><span class="p">)</span>
<span class="nb">print</span> <span class="n">addressbook</span><span class="o">.</span><span class="n">qux</span> <span class="c1"># qux is a top level constant</span>
<span class="c1"># 123</span>
<span class="n">person</span> <span class="o">=</span> <span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="o">.</span><span class="n">new_message</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – A relative or absolute path to a Cap’n Proto schema</p></li>
<li><p><strong>display_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The name internally used by the Cap’n Proto library
for the loaded schema. By default, it’s just os.path.basename(file_name)</p></li>
<li><p><strong>imports</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a>) – A list of str directories to add to the import path.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>ModuleType</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A module corresponding to the loaded schema. You can access
parsed schemas and constants with . syntax</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><ul class="simple">
<li><p><code class="xref py py-exc docutils literal notranslate"><span class="pre">exceptions.IOError</span></code> if <cite>file_name</cite> doesn’t exist</p></li>
<li><p><a class="reference internal" href="#capnp.KjException" title="capnp.KjException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KjException</span></code></a> if the Cap’n Proto C++ library has any problems loading the schema</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="capnp.SchemaParser.modules_by_id">
<code class="sig-name descname">modules_by_id</code><a class="headerlink" href="#capnp.SchemaParser.modules_by_id" title="Permalink to this definition">¶</a></dt>
<dd><p>modules_by_id: dict</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="capnp.add_import_hook">
<code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">add_import_hook</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">additional_paths</span><span class="o">=</span><span class="default_value">[]</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.add_import_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a hook to the python import system, so that Cap’n Proto modules are directly importable</p>
<p>After calling this function, you can use the python import syntax to directly import capnproto schemas. This function is automatically called upon first import of <cite>capnp</cite>, so you will typically never need to use this function.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">capnp</span>
<span class="n">capnp</span><span class="o">.</span><span class="n">add_import_hook</span><span class="p">()</span>

<span class="kn">import</span> <span class="nn">addressbook_capnp</span>
<span class="c1"># equivalent to capnp.load(&#39;addressbook.capnp&#39;, &#39;addressbook&#39;, sys.path), except it will search for &#39;addressbook.capnp&#39; in all directories of sys.path</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>additional_paths</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a>) – Additional paths, listed as strings, to be used to search for the .capnp files. It is prepended to the beginning of sys.path. It also affects imports inside of Cap’n Proto schemas.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="capnp.cleanup_global_schema_parser">
<code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">cleanup_global_schema_parser</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#capnp.cleanup_global_schema_parser" title="Permalink to this definition">¶</a></dt>
<dd><p>Unloads all of the schema from the current context</p>
</dd></dl>

<dl class="py function">
<dt id="capnp.create_event_loop">
<code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">create_event_loop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">threaded</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.create_event_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new global event loop. This will not remove the previous
EventLoop for you, so make sure to do that first</p>
</dd></dl>

<dl class="py function">
<dt id="capnp.getTimer">
<code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">getTimer</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#capnp.getTimer" title="Permalink to this definition">¶</a></dt>
<dd><p>Get libcapnp event loop timer</p>
</dd></dl>

<dl class="py function">
<dt id="capnp.join_promises">
<code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">join_promises</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">promises</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.join_promises" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="capnp.load">
<code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">load</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file_name</span></em>, <em class="sig-param"><span class="n">display_name</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">imports</span><span class="o">=</span><span class="default_value">[]</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a Cap’n Proto schema from a file</p>
<p>You will have to load a schema before you can begin doing anything
meaningful with this library. Loading a schema is much like loading
a Python module (and load even returns a <cite>ModuleType</cite>). Once it’s been
loaded, you use it much like any other Module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">addressbook</span> <span class="o">=</span> <span class="n">capnp</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;addressbook.capnp&#39;</span><span class="p">)</span>
<span class="nb">print</span> <span class="n">addressbook</span><span class="o">.</span><span class="n">qux</span> <span class="c1"># qux is a top level constant in the addressbook.capnp schema</span>
<span class="c1"># 123</span>
<span class="n">person</span> <span class="o">=</span> <span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="o">.</span><span class="n">new_message</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – A relative or absolute path to a Cap’n Proto schema</p></li>
<li><p><strong>display_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The name internally used by the Cap’n Proto library
for the loaded schema. By default, it’s just os.path.basename(file_name)</p></li>
<li><p><strong>imports</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)"><em>list</em></a>) – A list of str directories to add to the import path.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>ModuleType</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A module corresponding to the loaded schema. You can access
parsed schemas and constants with . syntax</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp.KjException" title="capnp.KjException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KjException</span></code></a> if <cite>file_name</cite> doesn’t exist</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="capnp.poll_once">
<code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">poll_once</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#capnp.poll_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Poll libcapnp event loop once</p>
</dd></dl>

<dl class="py function">
<dt id="capnp.remove_event_loop">
<code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">remove_event_loop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ignore_errors</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.remove_event_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the global event loop</p>
</dd></dl>

<dl class="py function">
<dt id="capnp.remove_import_hook">
<code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">remove_import_hook</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#capnp.remove_import_hook" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the import hook, and return python’s import to normal</p>
</dd></dl>

<dl class="py function">
<dt id="capnp.reset_event_loop">
<code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">reset_event_loop</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">ignore_errors</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">threaded</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp.reset_event_loop" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes event loop, then creates a new one. See remove_event_loop and create_event_loop for more details.</p>
</dd></dl>

<dl class="py function">
<dt id="capnp.wait_forever">
<code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">wait_forever</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#capnp.wait_forever" title="Permalink to this definition">¶</a></dt>
<dd><p>Use libcapnp event loop to poll/wait forever</p>
</dd></dl>

</div>
<div class="section" id="internal-classes">
<h2>Internal Classes<a class="headerlink" href="#internal-classes" title="Permalink to this headline">¶</a></h2>
<p>These classes are internal to the library. You will never need to allocate
one yourself, but you may end up using some of their member methods.</p>
<div class="section" id="modules">
<h3>Modules<a class="headerlink" href="#modules" title="Permalink to this headline">¶</a></h3>
<p>These are classes that are made for you when you import a Cap’n Proto file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">capnp</span>
<span class="kn">import</span> <span class="nn">addressbook_capnp</span>

<span class="nb">print</span> <span class="nb">type</span><span class="p">(</span><span class="n">addressbook_capnp</span><span class="o">.</span><span class="n">Person</span><span class="p">)</span> <span class="c1"># capnp.capnp._StructModule</span>
</pre></div>
</div>
<dl class="py class">
<dt id="capnp._InterfaceModule">
<em class="property">class </em><code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">_InterfaceModule</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schema</span></em>, <em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._InterfaceModule" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt id="capnp._StructModule">
<em class="property">class </em><code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">_StructModule</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">schema</span></em>, <em class="sig-param"><span class="n">name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StructModule" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="capnp._StructModule.from_bytes">
<code class="sig-name descname">from_bytes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">buf</span></em>, <em class="sig-param"><span class="n">traversal_limit_in_words</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">nesting_limit</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">builder</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StructModule.from_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a Reader for the unpacked object in buf.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buf</strong> (<em>buffer</em>) – Any Python object that supports the buffer interface.</p></li>
<li><p><strong>traversal_limit_in_words</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed. Is actually a uint64_t, and values can be up to 2^64-1. Default is 8*1024*1024.</p></li>
<li><p><strong>nesting_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed. Default is 64.</p></li>
<li><p><strong>builder</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – If true, return a builder object. This will allow you to change the contents of <cite>buf</cite>, so do this with care.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicStructReader" title="capnp._DynamicStructReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructReader</span></code></a> or <a class="reference internal" href="#capnp._DynamicStructBuilder" title="capnp._DynamicStructBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructBuilder</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="capnp._StructModule.from_bytes_packed">
<code class="sig-name descname">from_bytes_packed</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">buf</span></em>, <em class="sig-param"><span class="n">traversal_limit_in_words</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">nesting_limit</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StructModule.from_bytes_packed" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a Reader for the packed object in buf.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buf</strong> (<em>buffer</em>) – Any Python object that supports the readable buffer interface.</p></li>
<li><p><strong>traversal_limit_in_words</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed. Is actually a uint64_t, and values can be up to 2^64-1. Default is 8*1024*1024.</p></li>
<li><p><strong>nesting_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed. Default is 64.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicStructReader" title="capnp._DynamicStructReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructReader</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="capnp._StructModule.from_segments">
<code class="sig-name descname">from_segments</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">segments</span></em>, <em class="sig-param"><span class="n">traversal_limit_in_words</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">nesting_limit</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StructModule.from_segments" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a Reader for a list of segment bytes.</p>
<p>This avoids making copies.</p>
<p>NB: This is not currently supported on PyPy.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)">list</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="capnp._StructModule.new_message">
<code class="sig-name descname">new_message</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">num_first_segment_words</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StructModule.new_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a newly allocated builder message.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>num_first_segment_words</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Size of the first segment to allocate in the message (in words ie. 8 byte increments)</p></li>
<li><p><strong>kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a>) – A list of fields and their values to initialize in the struct. Note, this is not an actual argument, but refers to Python’s ability to pass keyword arguments. ie. new_message(my_field=100)</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicStructBuilder" title="capnp._DynamicStructBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructBuilder</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="capnp._StructModule.read">
<code class="sig-name descname">read</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">file</span></em>, <em class="sig-param"><span class="n">traversal_limit_in_words</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">nesting_limit</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StructModule.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a Reader for the unpacked object read from file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> (<em>file</em>) – A python file-like object. It must be a “real” file, with a <cite>fileno()</cite> method.</p></li>
<li><p><strong>traversal_limit_in_words</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed. Is actually a uint64_t, and values can be up to 2^64-1. Default is 8*1024*1024.</p></li>
<li><p><strong>nesting_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed. Default is 64.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicStructReader" title="capnp._DynamicStructReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructReader</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="capnp._StructModule.read_multiple">
<code class="sig-name descname">read_multiple</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">file</span></em>, <em class="sig-param"><span class="n">traversal_limit_in_words</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">nesting_limit</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">skip_copy</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StructModule.read_multiple" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an iterable, that when traversed will return Readers for messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> (<em>file</em>) – A python file-like object. It must be a “real” file, with a <cite>fileno()</cite> method.</p></li>
<li><p><strong>traversal_limit_in_words</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed. Is actually a uint64_t, and values can be up to 2^64-1. Default is 8*1024*1024.</p></li>
<li><p><strong>nesting_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed. Default is 64.</p></li>
<li><p><strong>skip_copy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – By default, each message is copied because the file needs to advance, even if the message is never read completely. Skip this only if you know what you’re doing.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Iterable with elements of <a class="reference internal" href="#capnp._DynamicStructReader" title="capnp._DynamicStructReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructReader</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="capnp._StructModule.read_multiple_bytes">
<code class="sig-name descname">read_multiple_bytes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">buf</span></em>, <em class="sig-param"><span class="n">traversal_limit_in_words</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">nesting_limit</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StructModule.read_multiple_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an iterable, that when traversed will return Readers for messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buf</strong> (<em>buffer</em>) – Any Python object that supports the buffer interface.</p></li>
<li><p><strong>traversal_limit_in_words</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed. Is actually a uint64_t, and values can be up to 2^64-1. Default is 8*1024*1024.</p></li>
<li><p><strong>nesting_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed. Default is 64.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Iterable with elements of <a class="reference internal" href="#capnp._DynamicStructReader" title="capnp._DynamicStructReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructReader</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="capnp._StructModule.read_multiple_bytes_packed">
<code class="sig-name descname">read_multiple_bytes_packed</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">buf</span></em>, <em class="sig-param"><span class="n">traversal_limit_in_words</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">nesting_limit</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StructModule.read_multiple_bytes_packed" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an iterable, that when traversed will return Readers for messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>buf</strong> (<em>buffer</em>) – Any Python object that supports the buffer interface.</p></li>
<li><p><strong>traversal_limit_in_words</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed. Is actually a uint64_t, and values can be up to 2^64-1. Default is 8*1024*1024.</p></li>
<li><p><strong>nesting_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed. Default is 64.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Iterable with elements of <a class="reference internal" href="#capnp._DynamicStructReader" title="capnp._DynamicStructReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructReader</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="capnp._StructModule.read_multiple_packed">
<code class="sig-name descname">read_multiple_packed</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">file</span></em>, <em class="sig-param"><span class="n">traversal_limit_in_words</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">nesting_limit</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">skip_copy</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StructModule.read_multiple_packed" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an iterable, that when traversed will return Readers for messages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> (<em>file</em>) – A python file-like object. It must be a “real” file, with a <cite>fileno()</cite> method.</p></li>
<li><p><strong>traversal_limit_in_words</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed. Is actually a uint64_t, and values can be up to 2^64-1. Default is 8*1024*1024.</p></li>
<li><p><strong>nesting_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed. Default is 64.</p></li>
<li><p><strong>skip_copy</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – By default, each message is copied because the file needs to advance, even if the message is never read completely. Skip this only if you know what you’re doing.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Iterable with elements of <a class="reference internal" href="#capnp._DynamicStructReader" title="capnp._DynamicStructReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructReader</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="capnp._StructModule.read_packed">
<code class="sig-name descname">read_packed</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">file</span></em>, <em class="sig-param"><span class="n">traversal_limit_in_words</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">nesting_limit</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StructModule.read_packed" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a Reader for the packed object read from file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> (<em>file</em>) – A python file-like object. It must be a “real” file, with a <cite>fileno()</cite> method.</p></li>
<li><p><strong>traversal_limit_in_words</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed. Is actually a uint64_t, and values can be up to 2^64-1. Default is 8*1024*1024.</p></li>
<li><p><strong>nesting_limit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Limits how many total words of data are allowed to be traversed. Default is 64.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicStructReader" title="capnp._DynamicStructReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructReader</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="readers">
<h3>Readers<a class="headerlink" href="#readers" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="capnp._DynamicListReader">
<em class="property">class </em><code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">_DynamicListReader</code><a class="headerlink" href="#capnp._DynamicListReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for reading Cap’n Proto Lists</p>
<p>This class thinly wraps the C++ Cap’n Proto DynamicList::Reader class. __getitem__ and __len__ have been defined properly, so you can treat this class mostly like any other iterable class:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="n">person</span> <span class="o">=</span> <span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

<span class="n">phones</span> <span class="o">=</span> <span class="n">person</span><span class="o">.</span><span class="n">phones</span> <span class="c1"># This returns a _DynamicListReader</span>

<span class="n">phone</span> <span class="o">=</span> <span class="n">phones</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="nb">print</span> <span class="n">phone</span><span class="o">.</span><span class="n">number</span>

<span class="k">for</span> <span class="n">phone</span> <span class="ow">in</span> <span class="n">phones</span><span class="p">:</span>
    <span class="nb">print</span> <span class="n">phone</span><span class="o">.</span><span class="n">number</span>
</pre></div>
</div>
</dd></dl>

<dl class="py class">
<dt id="capnp._DynamicStructReader">
<em class="property">class </em><code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">_DynamicStructReader</code><a class="headerlink" href="#capnp._DynamicStructReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads Cap’n Proto structs</p>
<p>This class is almost a 1 for 1 wrapping of the Cap’n Proto C++ DynamicStruct::Reader. The only difference is that instead of a <cite>get</cite> method, __getattr__ is overloaded and the field name is passed onto the C++ equivalent <cite>get</cite>. This means you just use . syntax to access any field. For field names that don’t follow valid python naming convention for fields, use the global function <a class="reference external" href="https://docs.python.org/3/library/functions.html#getattr" title="(in Python v3.8)"><code class="xref py py-func docutils literal notranslate"><span class="pre">getattr()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">person</span> <span class="o">=</span> <span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">file</span><span class="p">)</span> <span class="c1"># This returns a _DynamicStructReader</span>
<span class="nb">print</span> <span class="n">person</span><span class="o">.</span><span class="n">name</span> <span class="c1"># using . syntax</span>
<span class="nb">print</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">person</span><span class="p">,</span> <span class="s1">&#39;field-with-hyphens&#39;</span><span class="p">)</span> <span class="c1"># for names that are invalid for python, use getattr</span>
</pre></div>
</div>
<dl class="py method">
<dt id="capnp._DynamicStructReader.as_builder">
<code class="sig-name descname">as_builder</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">num_first_segment_words</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructReader.as_builder" title="Permalink to this definition">¶</a></dt>
<dd><p>A method for casting this Reader to a Builder</p>
<p>This is a copying operation with respect to the message’s buffer. Changes in the new builder will not reflect in the original reader.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>num_first_segment_words</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Size of the first segment to allocate in the message (in words ie. 8 byte increments)</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicStructBuilder" title="capnp._DynamicStructBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructBuilder</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="capnp._DynamicStructReader.is_root">
<code class="sig-name descname">is_root</code><a class="headerlink" href="#capnp._DynamicStructReader.is_root" title="Permalink to this definition">¶</a></dt>
<dd><p>is_root: ‘bool’</p>
</dd></dl>

<dl class="py attribute">
<dt id="capnp._DynamicStructReader.schema">
<code class="sig-name descname">schema</code><a class="headerlink" href="#capnp._DynamicStructReader.schema" title="Permalink to this definition">¶</a></dt>
<dd><p>A property that returns the _StructSchema object matching this reader</p>
</dd></dl>

<dl class="py method">
<dt id="capnp._DynamicStructReader.to_dict">
<code class="sig-name descname">to_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">ordered</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructReader.to_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="capnp._DynamicStructReader.total_size">
<code class="sig-name descname">total_size</code><a class="headerlink" href="#capnp._DynamicStructReader.total_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="capnp._DynamicStructReader.which">
<code class="sig-name descname">which</code><a class="headerlink" href="#capnp._DynamicStructReader.which" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the enum corresponding to the union in this struct</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicEnumField</span></code></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A string/enum corresponding to what field is set in the union</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#capnp.KjException" title="capnp.KjException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KjException</span></code></a> if this struct doesn’t contain a union</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="capnp._PackedFdMessageReader">
<em class="property">class </em><code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">_PackedFdMessageReader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em>, <em class="sig-param"><span class="n">traversal_limit_in_words</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">nesting_limit</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._PackedFdMessageReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a Cap’n Proto message from a file descriptor in a packed manner</p>
<p>You use this class to for reading message(s) from a file. It’s analagous to the inverse of <code class="xref py py-func docutils literal notranslate"><span class="pre">_write_packed_message_to_fd()</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">_MessageBuilder</span></code>, but in one class.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;out.txt&#39;</span><span class="p">)</span>
<span class="n">message</span> <span class="o">=</span> <span class="n">_PackedFdMessageReader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">person</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">get_root</span><span class="p">(</span><span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="p">)</span>
<span class="nb">print</span> <span class="n">person</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p>fd (<cite>int</cite>) - A file descriptor</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="capnp._PackedFdMessageReader.get_root">
<code class="sig-name descname">get_root</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">schema</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._PackedFdMessageReader.get_root" title="Permalink to this definition">¶</a></dt>
<dd><p>A method for instantiating Cap’n Proto structs</p>
<p>You will need to pass in a schema to specify which struct to
instantiate. Schemas are available in a loaded Cap’n Proto module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">addressbook</span> <span class="o">=</span> <span class="n">capnp</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;addressbook.capnp&#39;</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">person</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">get_root</span><span class="p">(</span><span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>schema</strong> (<em>Schema</em>) – A Cap’n proto schema specifying which struct to instantiate</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicStructReader" title="capnp._DynamicStructReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructReader</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An object with all the data of the read Cap’n Proto message.
Access members with . syntax.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="capnp._PackedFdMessageReader.get_root_as_any">
<code class="sig-name descname">get_root_as_any</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._PackedFdMessageReader.get_root_as_any" title="Permalink to this definition">¶</a></dt>
<dd><p>A method for getting a Cap’n Proto AnyPointer, from an already pre-written buffer</p>
<p>Don’t use this method unless you know what you’re doing.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicObjectReader</span></code></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An AnyPointer that you can read from</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="capnp._StreamFdMessageReader">
<em class="property">class </em><code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">_StreamFdMessageReader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">file</span></em>, <em class="sig-param"><span class="n">traversal_limit_in_words</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">nesting_limit</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StreamFdMessageReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a Cap’n Proto message from a file descriptor</p>
<p>You use this class to for reading message(s) from a file. It’s analagous to the inverse of <code class="xref py py-func docutils literal notranslate"><span class="pre">_write_message_to_fd()</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">_MessageBuilder</span></code>, but in one class:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;out.txt&#39;</span><span class="p">)</span>
<span class="n">message</span> <span class="o">=</span> <span class="n">_StreamFdMessageReader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">person</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">get_root</span><span class="p">(</span><span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="p">)</span>
<span class="nb">print</span> <span class="n">person</span><span class="o">.</span><span class="n">name</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p>fd (<cite>int</cite>) - A file descriptor</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="capnp._StreamFdMessageReader.get_root">
<code class="sig-name descname">get_root</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">schema</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StreamFdMessageReader.get_root" title="Permalink to this definition">¶</a></dt>
<dd><p>A method for instantiating Cap’n Proto structs</p>
<p>You will need to pass in a schema to specify which struct to
instantiate. Schemas are available in a loaded Cap’n Proto module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">addressbook</span> <span class="o">=</span> <span class="n">capnp</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;addressbook.capnp&#39;</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">person</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">get_root</span><span class="p">(</span><span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>schema</strong> (<em>Schema</em>) – A Cap’n proto schema specifying which struct to instantiate</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicStructReader" title="capnp._DynamicStructReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructReader</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An object with all the data of the read Cap’n Proto message.
Access members with . syntax.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="capnp._StreamFdMessageReader.get_root_as_any">
<code class="sig-name descname">get_root_as_any</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._StreamFdMessageReader.get_root_as_any" title="Permalink to this definition">¶</a></dt>
<dd><p>A method for getting a Cap’n Proto AnyPointer, from an already pre-written buffer</p>
<p>Don’t use this method unless you know what you’re doing.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicObjectReader</span></code></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An AnyPointer that you can read from</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="builders">
<h3>Builders<a class="headerlink" href="#builders" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="capnp._DynamicResizableListBuilder">
<em class="property">class </em><code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">_DynamicResizableListBuilder</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">parent</span></em>, <em class="sig-param"><span class="n">field</span></em>, <em class="sig-param"><span class="n">schema</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicResizableListBuilder" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for building growable Cap’n Proto Lists</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You need to call <a class="reference internal" href="#capnp._DynamicResizableListBuilder.finish" title="capnp._DynamicResizableListBuilder.finish"><code class="xref py py-meth docutils literal notranslate"><span class="pre">finish()</span></code></a> on this object before serializing the Cap’n Proto message. Failure to do so will cause your objects not to be written out as well as leaking orphan structs into your message.</p>
</div>
<p>This class works much like <a class="reference internal" href="#capnp._DynamicListBuilder" title="capnp._DynamicListBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicListBuilder</span></code></a>, but it allows growing the list dynamically. It is meant for lists of structs, since for primitive types like int or float, you’re much better off using a normal python list and then serializing straight to a Cap’n Proto list. It has __getitem__ and __len__ defined, but not __setitem__:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="n">person</span> <span class="o">=</span> <span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="o">.</span><span class="n">new_message</span><span class="p">()</span>

<span class="n">phones</span> <span class="o">=</span> <span class="n">person</span><span class="o">.</span><span class="n">init_resizable_list</span><span class="p">(</span><span class="s1">&#39;phones&#39;</span><span class="p">)</span> <span class="c1"># This returns a _DynamicResizableListBuilder</span>

<span class="n">phone</span> <span class="o">=</span> <span class="n">phones</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
<span class="n">phone</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="s1">&#39;foo&#39;</span>
<span class="n">phone</span> <span class="o">=</span> <span class="n">phones</span><span class="o">.</span><span class="n">add</span><span class="p">()</span>
<span class="n">phone</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span>

<span class="n">people</span><span class="o">.</span><span class="n">finish</span><span class="p">()</span>

<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;example&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="n">person</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt id="capnp._DynamicResizableListBuilder.add">
<code class="sig-name descname">add</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicResizableListBuilder.add" title="Permalink to this definition">¶</a></dt>
<dd><p>A method for adding a new struct to the list</p>
<p>This will return a struct, in which you can set fields that will be reflected in the serialized Cap’n Proto message.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#capnp._DynamicStructBuilder" title="capnp._DynamicStructBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructBuilder</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="capnp._DynamicResizableListBuilder.finish">
<code class="sig-name descname">finish</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicResizableListBuilder.finish" title="Permalink to this definition">¶</a></dt>
<dd><p>A method for closing this list and serializing all its members to the message</p>
<p>If you don’t call this method, the items you previously added from this object will leak into the message, ie. inaccessible but still taking up space.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="capnp._DynamicListBuilder">
<em class="property">class </em><code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">_DynamicListBuilder</code><a class="headerlink" href="#capnp._DynamicListBuilder" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for building Cap’n Proto Lists</p>
<p>This class thinly wraps the C++ Cap’n Proto DynamicList::Bulder class. __getitem__, __setitem__, and __len__ have been defined properly, so you can treat this class mostly like any other iterable class:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="n">person</span> <span class="o">=</span> <span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="o">.</span><span class="n">new_message</span><span class="p">()</span>

<span class="n">phones</span> <span class="o">=</span> <span class="n">person</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="s1">&#39;phones&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="c1"># This returns a _DynamicListBuilder</span>

<span class="n">phone</span> <span class="o">=</span> <span class="n">phones</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">phone</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="s1">&#39;foo&#39;</span>
<span class="n">phone</span> <span class="o">=</span> <span class="n">phones</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">phone</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span>

<span class="k">for</span> <span class="n">phone</span> <span class="ow">in</span> <span class="n">phones</span><span class="p">:</span>
    <span class="nb">print</span> <span class="n">phone</span><span class="o">.</span><span class="n">number</span>
</pre></div>
</div>
<dl class="py method">
<dt id="capnp._DynamicListBuilder.adopt">
<code class="sig-name descname">adopt</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">index</em>, <em class="sig-param">_DynamicOrphan orphan</em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicListBuilder.adopt" title="Permalink to this definition">¶</a></dt>
<dd><p>A method for adopting Cap’n Proto orphans</p>
<p>Don’t use this method unless you know what you’re doing. Orphans are useful for dynamically allocating objects for an unknown sized list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The index of the element in the list to replace with the newly adopted object</p></li>
<li><p><strong>orphan</strong> (<a class="reference internal" href="#capnp._DynamicOrphan" title="capnp._DynamicOrphan"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicOrphan</span></code></a>) – A Cap’n proto orphan to adopt. It will be unusable after this operation.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>void</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="capnp._DynamicListBuilder.disown">
<code class="sig-name descname">disown</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">index</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicListBuilder.disown" title="Permalink to this definition">¶</a></dt>
<dd><p>A method for disowning Cap’n Proto orphans</p>
<p>Don’t use this method unless you know what you’re doing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The index of the element in the list to disown</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicOrphan" title="capnp._DynamicOrphan"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicOrphan</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="capnp._DynamicListBuilder.init">
<code class="sig-name descname">init</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">index</span></em>, <em class="sig-param"><span class="n">size</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicListBuilder.init" title="Permalink to this definition">¶</a></dt>
<dd><p>A method for initializing an element in a list</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>index</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The index of the element in the list</p></li>
<li><p><strong>size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Size of the element to be initialized.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="capnp._DynamicStructBuilder">
<em class="property">class </em><code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">_DynamicStructBuilder</code><a class="headerlink" href="#capnp._DynamicStructBuilder" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds Cap’n Proto structs</p>
<p>This class is almost a 1 for 1 wrapping of the Cap’n Proto C++ DynamicStruct::Builder. The only difference is that instead of a <cite>get</cite>/<cite>set</cite> method, __getattr__/__setattr__ is overloaded and the field name is passed onto the C++ equivalent function. This means you just use . syntax to access or set any field. For field names that don’t follow valid python naming convention for fields, use the global functions <a class="reference external" href="https://docs.python.org/3/library/functions.html#getattr" title="(in Python v3.8)"><code class="xref py py-func docutils literal notranslate"><span class="pre">getattr()</span></code></a>/<a class="reference external" href="https://docs.python.org/3/library/functions.html#setattr" title="(in Python v3.8)"><code class="xref py py-func docutils literal notranslate"><span class="pre">setattr()</span></code></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">person</span> <span class="o">=</span> <span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="o">.</span><span class="n">new_message</span><span class="p">()</span> <span class="c1"># This returns a _DynamicStructBuilder</span>

<span class="n">person</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;foo&#39;</span> <span class="c1"># using . syntax</span>
<span class="nb">print</span> <span class="n">person</span><span class="o">.</span><span class="n">name</span> <span class="c1"># using . syntax</span>

<span class="nb">setattr</span><span class="p">(</span><span class="n">person</span><span class="p">,</span> <span class="s1">&#39;field-with-hyphens&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">)</span> <span class="c1"># for names that are invalid for python, use setattr</span>
<span class="nb">print</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">person</span><span class="p">,</span> <span class="s1">&#39;field-with-hyphens&#39;</span><span class="p">)</span> <span class="c1"># for names that are invalid for python, use getattr</span>
</pre></div>
</div>
<dl class="py method">
<dt id="capnp._DynamicStructBuilder.adopt">
<code class="sig-name descname">adopt</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">field</em>, <em class="sig-param">_DynamicOrphan orphan</em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.adopt" title="Permalink to this definition">¶</a></dt>
<dd><p>A method for adopting Cap’n Proto orphans</p>
<p>Don’t use this method unless you know what you’re doing. Orphans are useful for dynamically allocating objects for an unknown sized list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>field</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The field name in the struct</p></li>
<li><p><strong>orphan</strong> (<a class="reference internal" href="#capnp._DynamicOrphan" title="capnp._DynamicOrphan"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicOrphan</span></code></a>) – A Cap’n proto orphan to adopt. It will be unusable after this operation.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>void</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="capnp._DynamicStructBuilder.as_reader">
<code class="sig-name descname">as_reader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.as_reader" title="Permalink to this definition">¶</a></dt>
<dd><p>A method for casting this Builder to a Reader</p>
<p>This is a non-copying operation with respect to the message’s buffer. This means changes to the fields in the original struct will carry over to the new reader.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#capnp._DynamicStructReader" title="capnp._DynamicStructReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructReader</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="capnp._DynamicStructBuilder.clear_write_flag">
<code class="sig-name descname">clear_write_flag</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.clear_write_flag" title="Permalink to this definition">¶</a></dt>
<dd><p>A method used to clear the _is_written flag.</p>
<p>This allows you to write the struct more than once without seeing any warnings.</p>
</dd></dl>

<dl class="py method">
<dt id="capnp._DynamicStructBuilder.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">num_first_segment_words</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>A method for copying this Builder</p>
<p>This is a copying operation with respect to the message’s buffer. Changes in the new builder will not reflect in the original reader.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>num_first_segment_words</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Size of the first segment to allocate in the message (in words ie. 8 byte increments)</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicStructBuilder" title="capnp._DynamicStructBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructBuilder</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="capnp._DynamicStructBuilder.disown">
<code class="sig-name descname">disown</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">field</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.disown" title="Permalink to this definition">¶</a></dt>
<dd><p>A method for disowning Cap’n Proto orphans</p>
<p>Don’t use this method unless you know what you’re doing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>field</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The field name in the struct</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicOrphan" title="capnp._DynamicOrphan"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicOrphan</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="capnp._DynamicStructBuilder.from_dict">
<code class="sig-name descname">from_dict</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">dict d</em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.from_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="capnp._DynamicStructBuilder.init">
<code class="sig-name descname">init</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">field</span></em>, <em class="sig-param"><span class="n">size</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Method for initializing fields that are of type union/struct/list</p>
<p>Typically, you don’t have to worry about initializing structs/unions, so this method is mainly for lists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>field</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The field name to initialize</p></li>
<li><p><strong>size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The size of the list to initiialize. This should be None for struct/union initialization.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicStructBuilder" title="capnp._DynamicStructBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructBuilder</span></code></a> or <a class="reference internal" href="#capnp._DynamicListBuilder" title="capnp._DynamicListBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicListBuilder</span></code></a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#capnp.KjException" title="capnp.KjException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KjException</span></code></a> if the field isn’t in this struct</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="capnp._DynamicStructBuilder.init_resizable_list">
<code class="sig-name descname">init_resizable_list</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">field</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.init_resizable_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Method for initializing fields that are of type list (of structs)</p>
<p>This version of init returns a <a class="reference internal" href="#capnp._DynamicResizableListBuilder" title="capnp._DynamicResizableListBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicResizableListBuilder</span></code></a> that allows you to add members one at a time (ie. if you don’t know the size for sure). This is only meant for lists of Cap’n Proto objects, since for primitive types you can just define a normal python list and fill it yourself.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You need to call <a class="reference internal" href="#capnp._DynamicResizableListBuilder.finish" title="capnp._DynamicResizableListBuilder.finish"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_DynamicResizableListBuilder.finish()</span></code></a> on the list object before serializing the Cap’n Proto message. Failure to do so will cause your objects not to be written out as well as leaking orphan structs into your message.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>field</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The field name to initialize</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicResizableListBuilder" title="capnp._DynamicResizableListBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicResizableListBuilder</span></code></a></p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#capnp.KjException" title="capnp.KjException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KjException</span></code></a> if the field isn’t in this struct</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="capnp._DynamicStructBuilder.is_root">
<code class="sig-name descname">is_root</code><a class="headerlink" href="#capnp._DynamicStructBuilder.is_root" title="Permalink to this definition">¶</a></dt>
<dd><p>is_root: ‘bool’</p>
</dd></dl>

<dl class="py attribute">
<dt id="capnp._DynamicStructBuilder.schema">
<code class="sig-name descname">schema</code><a class="headerlink" href="#capnp._DynamicStructBuilder.schema" title="Permalink to this definition">¶</a></dt>
<dd><p>A property that returns the _StructSchema object matching this writer</p>
</dd></dl>

<dl class="py method">
<dt id="capnp._DynamicStructBuilder.to_bytes">
<code class="sig-name descname">to_bytes</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.to_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the struct’s containing message as a Python bytes object in the unpacked binary format.</p>
<p>This is inefficient; it makes several copies.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.8)">bytes</a></p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp.KjException" title="capnp.KjException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KjException</span></code></a> if this isn’t the message’s root struct.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="capnp._DynamicStructBuilder.to_bytes_packed">
<code class="sig-name descname">to_bytes_packed</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.to_bytes_packed" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="capnp._DynamicStructBuilder.to_dict">
<code class="sig-name descname">to_dict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">verbose</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">ordered</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.to_dict" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="capnp._DynamicStructBuilder.to_segments">
<code class="sig-name descname">to_segments</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.to_segments" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the struct’s containing message as a Python list of Python bytes objects.</p>
<p>This avoids making copies.</p>
<p>NB: This is not currently supported on PyPy.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)">list</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="capnp._DynamicStructBuilder.total_size">
<code class="sig-name descname">total_size</code><a class="headerlink" href="#capnp._DynamicStructBuilder.total_size" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="capnp._DynamicStructBuilder.which">
<code class="sig-name descname">which</code><a class="headerlink" href="#capnp._DynamicStructBuilder.which" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the enum corresponding to the union in this struct</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicEnumField</span></code></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A string/enum corresponding to what field is set in the union</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#capnp.KjException" title="capnp.KjException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KjException</span></code></a> if this struct doesn’t contain a union</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="capnp._DynamicStructBuilder.write">
<code class="sig-name descname">write</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">file</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the struct’s containing message to the given file object in unpacked binary format.</p>
<p>This is a shortcut for calling capnp._write_message_to_fd().  This can only be called on the
message’s root struct.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file</strong> (<em>file</em>) – A file or socket object (or anything with a fileno() method), open for write.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>void</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#capnp.KjException" title="capnp.KjException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KjException</span></code></a> if this isn’t the message’s root struct.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="capnp._DynamicStructBuilder.write_packed">
<code class="sig-name descname">write_packed</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">file</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicStructBuilder.write_packed" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the struct’s containing message to the given file object in packed binary format.</p>
<p>This is a shortcut for calling capnp._write_packed_message_to_fd().  This can only be called on
the message’s root struct.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>file</strong> (<em>file</em>) – A file or socket object (or anything with a fileno() method), open for write.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>void</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><a class="reference internal" href="#capnp.KjException" title="capnp.KjException"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KjException</span></code></a> if this isn’t the message’s root struct.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="capnp._MallocMessageBuilder">
<em class="property">class </em><code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">_MallocMessageBuilder</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">size</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._MallocMessageBuilder" title="Permalink to this definition">¶</a></dt>
<dd><p>The main class for building Cap’n Proto messages</p>
<p>You will use this class to handle arena allocation of the Cap’n Proto
messages. You also use this object when you’re done assigning to Cap’n
Proto objects, and wish to serialize them:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">addressbook</span> <span class="o">=</span> <span class="n">capnp</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;addressbook.capnp&#39;</span><span class="p">)</span>
<span class="n">message</span> <span class="o">=</span> <span class="n">capnp</span><span class="o">.</span><span class="n">_MallocMessageBuilder</span><span class="p">()</span>
<span class="n">person</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">init_root</span><span class="p">(</span><span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="p">)</span>
<span class="n">person</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;alice&#39;</span>
<span class="o">...</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;out.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="n">_write_message_to_fd</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">fileno</span><span class="p">(),</span> <span class="n">message</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt id="capnp._MallocMessageBuilder.get_root">
<code class="sig-name descname">get_root</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">schema</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._MallocMessageBuilder.get_root" title="Permalink to this definition">¶</a></dt>
<dd><p>A method for instantiating Cap’n Proto structs, from an already pre-written buffer</p>
<p>Don’t use this method unless you know what you’re doing. You probably
want to use init_root instead:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">addressbook</span> <span class="o">=</span> <span class="n">capnp</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;addressbook.capnp&#39;</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">person</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">init_root</span><span class="p">(</span><span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">person</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">get_root</span><span class="p">(</span><span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>schema</strong> (<em>Schema</em>) – A Cap’n proto schema specifying which struct to instantiate</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicStructBuilder" title="capnp._DynamicStructBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructBuilder</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An object where you will set all the members</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="capnp._MallocMessageBuilder.get_root_as_any">
<code class="sig-name descname">get_root_as_any</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._MallocMessageBuilder.get_root_as_any" title="Permalink to this definition">¶</a></dt>
<dd><p>A method for getting a Cap’n Proto AnyPointer, from an already pre-written buffer</p>
<p>Don’t use this method unless you know what you’re doing.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicObjectBuilder</span></code></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An AnyPointer that you can set fields in</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="capnp._MallocMessageBuilder.get_segments_for_output">
<code class="sig-name descname">get_segments_for_output</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._MallocMessageBuilder.get_segments_for_output" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="capnp._MallocMessageBuilder.init_root">
<code class="sig-name descname">init_root</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">schema</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._MallocMessageBuilder.init_root" title="Permalink to this definition">¶</a></dt>
<dd><p>A method for instantiating Cap’n Proto structs</p>
<p>You will need to pass in a schema to specify which struct to
instantiate. Schemas are available in a loaded Cap’n Proto module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">addressbook</span> <span class="o">=</span> <span class="n">capnp</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;addressbook.capnp&#39;</span><span class="p">)</span>
<span class="o">...</span>
<span class="n">person</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">init_root</span><span class="p">(</span><span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>schema</strong> (<em>Schema</em>) – A Cap’n proto schema specifying which struct to instantiate</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicStructBuilder" title="capnp._DynamicStructBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructBuilder</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An object where you will set all the members</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="capnp._MallocMessageBuilder.new_orphan">
<code class="sig-name descname">new_orphan</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">schema</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._MallocMessageBuilder.new_orphan" title="Permalink to this definition">¶</a></dt>
<dd><p>A method for instantiating Cap’n Proto orphans</p>
<p>Don’t use this method unless you know what you’re doing. Orphans are useful for dynamically allocating objects for an unknown sized list, ie:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">addressbook</span> <span class="o">=</span> <span class="n">capnp</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;addressbook.capnp&#39;</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">capnp</span><span class="o">.</span><span class="n">_MallocMessageBuilder</span><span class="p">()</span>
<span class="n">alice</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">new_orphan</span><span class="p">(</span><span class="n">addressbook</span><span class="o">.</span><span class="n">Person</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>schema</strong> (<em>Schema</em>) – A Cap’n proto schema specifying which struct to instantiate</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#capnp._DynamicOrphan" title="capnp._DynamicOrphan"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicOrphan</span></code></a></p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An orphan representing a <a class="reference internal" href="#capnp._DynamicStructBuilder" title="capnp._DynamicStructBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructBuilder</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="capnp._MallocMessageBuilder.set_root">
<code class="sig-name descname">set_root</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._MallocMessageBuilder.set_root" title="Permalink to this definition">¶</a></dt>
<dd><p>A method for instantiating Cap’n Proto structs by copying from an existing struct</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> (<a class="reference internal" href="#capnp._DynamicStructReader" title="capnp._DynamicStructReader"><code class="xref py py-class docutils literal notranslate"><span class="pre">_DynamicStructReader</span></code></a>) – A Cap’n Proto struct value to copy</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>void</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id1">
<h3>RPC<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="capnp._CapabilityClient">
<em class="property">class </em><code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">_CapabilityClient</code><a class="headerlink" href="#capnp._CapabilityClient" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="capnp._CapabilityClient.cast_as">
<code class="sig-name descname">cast_as</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">schema</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._CapabilityClient.cast_as" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="capnp._DynamicCapabilityClient">
<em class="property">class </em><code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">_DynamicCapabilityClient</code><a class="headerlink" href="#capnp._DynamicCapabilityClient" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="capnp._DynamicCapabilityClient.cast_as">
<code class="sig-name descname">cast_as</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">schema</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicCapabilityClient.cast_as" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="capnp._DynamicCapabilityClient.schema">
<code class="sig-name descname">schema</code><a class="headerlink" href="#capnp._DynamicCapabilityClient.schema" title="Permalink to this definition">¶</a></dt>
<dd><p>A property that returns the _InterfaceSchema object matching this client</p>
</dd></dl>

<dl class="py method">
<dt id="capnp._DynamicCapabilityClient.upcast">
<code class="sig-name descname">upcast</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">schema</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicCapabilityClient.upcast" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="id2">
<h3>Miscellaneous<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<dl class="py class">
<dt id="capnp._DynamicOrphan">
<em class="property">class </em><code class="sig-prename descclassname">capnp.</code><code class="sig-name descname">_DynamicOrphan</code><a class="headerlink" href="#capnp._DynamicOrphan" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="capnp._DynamicOrphan.get">
<code class="sig-name descname">get</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em><span class="sig-paren">)</span><a class="headerlink" href="#capnp._DynamicOrphan.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a python object corresponding to the DynamicValue owned by this orphan</p>
<p>Use this DynamicValue to set fields inside the orphan</p>
</dd></dl>

</dd></dl>

</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#classes">Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#rpc">RPC</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#promise">Promise</a></li>
<li class="toctree-l4"><a class="reference internal" href="#communication">Communication</a></li>
<li class="toctree-l4"><a class="reference internal" href="#capability">Capability</a></li>
<li class="toctree-l4"><a class="reference internal" href="#response">Response</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#functions">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#internal-classes">Internal Classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#modules">Modules</a></li>
<li class="toctree-l3"><a class="reference internal" href="#readers">Readers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#builders">Builders</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">RPC</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">Miscellaneous</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="quickstart.html"
                        title="previous chapter">Quickstart</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/capnp.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="quickstart.html" title="Quickstart"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">capnp 1.0.0b2 documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">API Reference</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2013-2019 (Jason Paryani), 2019-2020 (Jacob Alexander).
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.1.0.
    </div>
  </body>
</html>